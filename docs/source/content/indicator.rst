算法指标
=============

通用评分
----------

.. _binary_accuracy:

二值准确率
^^^^^^^^^^^^^
对于二值化的预报要素（例如晴雨），可以通过对预报和真值的匹配程度来统计准确率。

二值准确率是对于预报和真值完全一致的样本计为“预报准确”，然后计算“预报准确”样本数与预报总样本数之间的比值。公式如下：

.. math::

    ACC_{b} = \frac{C_{b}}{N} \times 100\%

式中:   

:math:`ACC_{b}`——二值预报准确率。

:math:`C_{b}`——预报与真值之间匹配一致的样本个数。

:math:`N`——预报的总样本个数。

.. _err_accuracy:

误差准确率
^^^^^^^^^^^
对于非二值化的预报要素，可以通过误差阈值过滤的方式来定义“准确”与“不准确”，进而再进行准确率的统计计算。

误差准确率是对于误差在允许范围内计为“预报准确”，然后计算“预报准确”样本数与预报总样本数之间的比值。公式如下：

.. math::

    ACC_{e} = \frac{C_{e}}{N} \times 100\%

式中:   

:math:`ACC_{e}`——预报与真值之间误差范围在 :math:`e` 以内的准确率。

:math:`C_{e}`——预报与真值之间误差范围在 :math:`e` 以内的样本个数。

:math:`N`——预报的总样本个数。


.. _rmse:

均方根误差（RMSE）
^^^^^^^^^^^^^^^^^^^^^^
均方根误差是预测值与真实值偏差的平方与观测次数比值的平方根，可用于衡量预测值与真值的偏离程度。公式如下：

.. math::

    RMSE = \sqrt{\frac{\sum_{k=1}^n (O_{k} - F_{k})^2}{n}}

式中:   

:math:`RMSE`——均方根误差。

:math:`O_{k}`——第 :math:`k` 个观测值。

:math:`F_{k}`——第 :math:`k` 个预报值。

:math:`n`——总样本数量

.. _mae:

平均绝对误差（MAE）
^^^^^^^^^^^^^^^^^^^^^^
平均绝对误差MAE是绝对误差的平均值，它其实是更一般形式的误差平均值。公式如下：

.. math::

    MAE = \frac{\sum_{k=1}^n |O_{k} - F_{k}|}{n}

式中:   

:math:`MAE`——平均绝对误差。

:math:`O_{k}`——第 :math:`k` 个观测值。

:math:`F_{k}`——第 :math:`k` 个预报值。

:math:`n`——总样本数量  

剩余平方和（RSS）
^^^^^^^^^^^^^^^^^^^^^
剩余平方和是统计学术语，也称作残差平方和，是实际值与估计值之差的平方的总和，也就是误差项平方的总和，利用剩余平方和可以很好地表示剩余的总和。公式如下：

.. math::

    RSS = \sum_{k=1}^n (O_{k} - F_{k})^2

式中:   

:math:`RSS`——剩余平方和。

:math:`O_{k}`——第 :math:`k` 个观测值。

:math:`F_{k}`——第 :math:`k` 个预报值。


卡方（χ2）
^^^^^^^^^^^^^^^^^^^^^


降水评分
-----------

晴雨准确率
^^^^^^^^^^^^^^
晴雨准确率，是指根据一定阈值对降水量进行“晴雨”识别，识别出“晴天”或“雨天”，然后将预报和观测同为“晴天”和同为“雨天”的计为“准确”，二者不一致的计为“不准确”，然后对该结果进行准确率评估的比例值。公式如下：

.. math::

    ACC_{rs} = \frac{C_{rs}}{N} \times 100\%

式中:   

:math:`ACC_{rs}`——晴雨预报准确率。

:math:`C_{rs}`——晴雨预报与真值之间匹配一致的样本个数。

:math:`N`——晴雨预报的总样本个数。

.. note::

    晴雨准确率就是一种有物理意义的 :ref:`binary_accuracy` 。


降水量误差准确率
^^^^^^^^^^^^^^^^^^^^
降水量误差准确率，是指预报与观测之间的偏差在指定范围内计为“准确”，而偏差超出范围的值计为“不准确”，然后对该结果进行准确率评估的比例值。公示如下：

.. math::

    ACC_{re} = \frac{C_{e}}{N} \times 100\%

式中:   

:math:`ACC_{re}`——降水量预报与真值之间误差范围在 :math:`re` 以内的准确率。

:math:`C_{re}`——降水预报与真值之间误差范围在 :math:`re` 以内的样本个数。

:math:`N`——降水预报的总样本个数。

.. note::

    降水量误差准确率就是 :ref:`err_accuracy` 对降水要素的套用。

晴雨命中率/空报率/漏报率
^^^^^^^^^^^^^^^^^^^^^^^^^^^

晴雨TS评分
^^^^^^^^^^^^^^

晴雨ETS评分
^^^^^^^^^^^^^^

晴雨BIAS评分
^^^^^^^^^^^^^^^^

降水分级命中率/空报率/漏报率
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

降水分级TS评分
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

降水分级ETS评分
^^^^^^^^^^^^^^^^^^^^

降水分级BIAS评分
^^^^^^^^^^^^^^^^^^^^^^

累计降水分级命中率/空报率/漏报率
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

累计降水分级TS评分
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

累计降水分级ETS评分
^^^^^^^^^^^^^^^^^^^^

累计降水分级BIAS评分
^^^^^^^^^^^^^^^^^^^^^^

风评分
--------
本项目对于风的预报的针对性检验评分，主要参考了《中华人民共和国国家标准：天气预报检验 风预报》（GB/T37302—2019）中的相关指标定义。当然，除了国标中列出的指标以外，我们还额外增加了一些自定义的实用指标。

风速均方根误差
^^^^^^^^^^^^^^^^^^^^
风速均方根误差是预报风速与观测风速之间的均方根误差，均方根误差的定义及计算方法请参考 :ref:`rmse` 章节。

风速平均绝对误差
^^^^^^^^^^^^^^^^^^^^^^
风速平均绝对误差是预报风速雨观测风速之间的平均绝对误差，平均绝对误差的定义及计算方法请参考 :ref:`mae` 章节。

风级准确率
^^^^^^^^^^^^^^^^^^^^
风级准确率为风力等级预报正确次数与风力等级预报总次数的百分比。预报风力和实况风力在同一检验等级，则为风力等级预报正确。公式如下：

.. math::

    S_{AC,k} = \frac{R_{s,k}}{N_{s,k}} \times 100\%

式中:   

:math:`S_{AC,k}`——风力等级预报准确率，下角标 :math:`k` 为规定的某个风力检验等级标识；

:math:`R_{s,k}` ——风力等级预报正确次数。

:math:`N_{s,k}` ——风力等级预报总次数。


.. note::

    本项目的风力等级采用《中华人民共和国国家标准：风力等级》（GB/T 28591-2012）表一中的风力等级划分，下同。具体等级表见附录。


风级偏强/偏弱率
^^^^^^^^^^^^^^^^^^^^
风级偏强为风力等级预报偏强次数与风力等级预报总次数的百分比。预报风力所在的检验等级大于实况风力所在的检验等级,则为风力等级预报偏强。
同理，风级偏弱率为风力等级预报偏弱次数与风力等级预报总次数的百分比。预报风力所在的检验等级小于实况风力所在的检验等级，则为风力等级预报偏弱。公式如下：

.. math::

    S_{FS,k} = \frac{S_{s,k}}{N_{s,k}} \times 100\%

    S_{FW,k} = \frac{W_{s,k}}{N_{s,k}} \times 100\%


式中:   

:math:`S_{FS,k}`——风力等级预报偏强率，下角标 :math:`k` 为规定的某个风力检验等级标识；

:math:`S_{s,k}` ——风力等级预报偏强次数。

:math:`S_{FW,k}`——风力等级预报偏弱率，下角标 :math:`k` 为规定的某个风力检验等级标识；

:math:`W_{s,k}` ——风力等级预报偏弱次数。

:math:`N_{s,k}` ——风力等级预报总次数。


风级评分
^^^^^^^^^^^^^^^^^^^^

风向方位准确率
^^^^^^^^^^^^^^^^^^^^

风向角度均方根误差
^^^^^^^^^^^^^^^^^^^^

风向角度平均绝对误差
^^^^^^^^^^^^^^^^^^^^^^

风向角度误差准确率
^^^^^^^^^^^^^^^^^^^^

风向评分
^^^^^^^^^^^^^^^^^^^^
